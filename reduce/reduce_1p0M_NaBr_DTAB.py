######################################################################
#Python Script Generated by GeneratePythonScript Algorithm
######################################################################
#sample_sans,          14251-add,
#sample_trans,         14251-add,
#sample_direct_beam,   14253-add,(same)  
#can_sans,             14254-add,(same)  
#can_trans,            14254-add,(same)  
#can_direct_beam,      14253-add,(same)  
#output_as,            1p0M_NaBr_DTAB
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014238.nxs',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014219.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014251.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
# Load sample_sans
LoadNexus(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/SANS2D00014251-add.nxs',OutputWorkspace='14251_sans_nxs',EntryNumber='1')
RotateInstrumentComponent(Workspace='14251_sans_nxs',ComponentName='front-detector',Y='1',Angle='0.0104378694668')
MoveInstrumentComponent(Workspace='14251_sans_nxs',ComponentName='front-detector',X='-0.27087831522799999',Y='0.14549999999999999',Z='-1.5209040463300001')
MoveInstrumentComponent(Workspace='14251_sans_nxs',ComponentName='rear-detector',X='-0.26779999999999998',Y='0.16550000000000001',Z='0.046728027343800001')
MoveInstrumentComponent(Workspace='14251_sans_nxs',ComponentName='some-sample-holder',Z='0.052999999999999999')
MoveInstrumentComponent(Workspace='14251_sans_nxs',ComponentName='monitor4',Z='-6.7422719726600002')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014238.nxs',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014219.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014251.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
# Load sample_tran
LoadNexus(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/SANS2D00014251-add.nxs',OutputWorkspace='14251_trans_nxs',SpectrumMax='8',EntryNumber='1')
RotateInstrumentComponent(Workspace='14251_trans_nxs',ComponentName='front-detector',Y='1',Angle='0.0104378694668')
MoveInstrumentComponent(Workspace='14251_trans_nxs',ComponentName='front-detector',X='-0.27087831522799999',Y='0.14549999999999999',Z='-1.5209040463300001')
MoveInstrumentComponent(Workspace='14251_trans_nxs',ComponentName='rear-detector',X='-0.26779999999999998',Y='0.16550000000000001',Z='0.046728027343800001')
MoveInstrumentComponent(Workspace='14251_trans_nxs',ComponentName='some-sample-holder',Z='0.052999999999999999')
MoveInstrumentComponent(Workspace='14251_trans_nxs',ComponentName='monitor4',Z='-6.7422719726600002')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014241.nxs',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014254.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
# Load can_sans
LoadNexus(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/SANS2D00014254-add.nxs',OutputWorkspace='14254_sans_nxs',EntryNumber='1')
RotateInstrumentComponent(Workspace='14254_sans_nxs',ComponentName='front-detector',Y='1',Angle='0.0104378694668')
MoveInstrumentComponent(Workspace='14254_sans_nxs',ComponentName='front-detector',X='-0.27087831522799999',Y='0.14549999999999999',Z='-1.5209040463300001')
MoveInstrumentComponent(Workspace='14254_sans_nxs',ComponentName='rear-detector',X='-0.26779999999999998',Y='0.16550000000000001',Z='0.046728027343800001')
MoveInstrumentComponent(Workspace='14254_sans_nxs',ComponentName='some-sample-holder',Z='0.052999999999999999')
MoveInstrumentComponent(Workspace='14254_sans_nxs',ComponentName='monitor4',Z='-6.7422719726600002')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014241.nxs',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014254.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
# Load can_tran
LoadNexus(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/SANS2D00014254-add.nxs',OutputWorkspace='14254_trans_nxs',SpectrumMax='8',EntryNumber='1')
RotateInstrumentComponent(Workspace='14254_trans_nxs',ComponentName='front-detector',Y='1',Angle='0.0104378694668')
MoveInstrumentComponent(Workspace='14254_trans_nxs',ComponentName='front-detector',X='-0.27087831522799999',Y='0.14549999999999999',Z='-1.5209040463300001')
MoveInstrumentComponent(Workspace='14254_trans_nxs',ComponentName='rear-detector',X='-0.26779999999999998',Y='0.16550000000000001',Z='0.046728027343800001')
MoveInstrumentComponent(Workspace='14254_trans_nxs',ComponentName='some-sample-holder',Z='0.052999999999999999')
MoveInstrumentComponent(Workspace='14254_trans_nxs',ComponentName='monitor4',Z='-6.7422719726600002')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014240.nxs',OutputWorkspace='added')
#LoadNexus(Filename=r'Y:/cycle_12_2/SANS2D00014253.nxs',OutputWorkspace='wtemp')
#Plus(LHSWorkspace='added',RHSWorkspace='wtemp',OutputWorkspace='added')
# direct beam
LoadNexus(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/SANS2D00014253-add.nxs',OutputWorkspace='14253_trans_nxs',SpectrumMax='8',EntryNumber='1')
RotateInstrumentComponent(Workspace='14253_trans_nxs',ComponentName='front-detector',Y='1',Angle='0.0104378694668')
MoveInstrumentComponent(Workspace='14253_trans_nxs',ComponentName='front-detector',X='-0.27087831522799999',Y='0.14549999999999999',Z='-1.5209040463300001')
MoveInstrumentComponent(Workspace='14253_trans_nxs',ComponentName='rear-detector',X='-0.26779999999999998',Y='0.16550000000000001',Z='0.046728027343800001')
MoveInstrumentComponent(Workspace='14253_trans_nxs',ComponentName='some-sample-holder',Z='0.052999999999999999')
MoveInstrumentComponent(Workspace='14253_trans_nxs',ComponentName='monitor4',Z='-6.7422719726600002')
# Mask
CropWorkspace(InputWorkspace='14251_sans_nxs',OutputWorkspace='14251rear_1D_1.75_16.5',StartWorkspaceIndex='8',EndWorkspaceIndex='36871')
MaskBins(InputWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='14251rear_1D_1.75_16.5',XMin='13000',XMax='15250')
MaskDetectorsInShape(Workspace='14251rear_1D_1.75_16.5',ShapeXML='<infinite-cylinder id="beam_stop"><centre x="0" y="0" z="0.0" /><axis x="0" y="0" z="1" /><radius val="0.047" /></infinite-cylinder><algebra val="beam_stop"/>')
MaskDetectors(Workspace='14251rear_1D_1.75_16.5',SpectraList='9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,36489,36490,36491,36492,36493,36494,36495,36496,36497,36498,36499,36500,36501,36502,36503,36504,36505,36506,36507,36508,36509,36510,36511,36512,36513,36514,36515,36516,36517,36518,36519,36520,36521,36522,36523,36524,36525,36526,36527,36528,36529,36530,36531,36532,36533,36534,36535,36536,36537,36538,36539,36540,36541,36542,36543,36544,36545,36546,36547,36548,36549,36550,36551,36552,36553,36554,36555,36556,36557,36558,36559,36560,36561,36562,36563,36564,36565,36566,36567,36568,36569,36570,36571,36572,36573,36574,36575,36576,36577,36578,36579,36580,36581,36582,36583,36584,36585,36586,36587,36588,36589,36590,36591,36592,36593,36594,36595,36596,36597,36598,36599,36600,36601,36602,36603,36604,36605,36606,36607,36608,36609,36610,36611,36612,36613,36614,36615,36616,36617,36618,36619,36620,36621,36622,36623,36624,36625,36626,36627,36628,36629,36630,36631,36632,36633,36634,36635,36636,36637,36638,36639,36640,36641,36642,36643,36644,36645,36646,36647,36648,36649,36650,36651,36652,36653,36654,36655,36656,36657,36658,36659,36660,36661,36662,36663,36664,36665,36666,36667,36668,36669,36670,36671,36672,36673,36674,36675,36676,36677,36678,36679,36680,36681,36682,36683,36684,36685,36686,36687,36688,36689,36690,36691,36692,36693,36694,36695,36696,36697,36698,36699,36700,36701,36702,36703,36704,36705,36706,36707,36708,36709,36710,36711,36712,36713,36714,36715,36716,36717,36718,36719,36720,36721,36722,36723,36724,36725,36726,36727,36728,36729,36730,36731,36732,36733,36734,36735,36736,36737,36738,36739,36740,36741,36742,36743,36744,36745,36746,36747,36748,36749,36750,36751,36752,36753,36754,36755,36756,36757,36758,36759,36760,36761,36762,36763,36764,36765,36766,36767,36768,36769,36770,36771,36772,36773,36774,36775,36776,36777,36778,36779,36780,36781,36782,36783,36784,36785,36786,36787,36788,36789,36790,36791,36792,36793,36794,36795,36796,36797,36798,36799,36800,36801,36802,36803,36804,36805,36806,36807,36808,36809,36810,36811,36812,36813,36814,36815,36816,36817,36818,36819,36820,36821,36822,36823,36824,36825,36826,36827,36828,36829,36830,36831,36832,36833,36834,36835,36836,36837,36838,36839,36840,36841,36842,36843,36844,36845,36846,36847,36848,36849,36850,36851,36852,36853,36854,36855,36856,36857,36858,36859,36860,36861,36862,36863,36864,36865,36866,36867,36868,36869,36870,36871,36872,9,201,393,585,777,969,1161,1353,1545,1737,1929,2121,2313,2505,2697,2889,3081,3273,3465,3657,3849,4041,4233,4425,4617,4809,5001,5193,5385,5577,5769,5961,6153,6345,6537,6729,6921,7113,7305,7497,7689,7881,8073,8265,8457,8649,8841,9033,9225,9417,9609,9801,9993,10185,10377,10569,10761,10953,11145,11337,11529,11721,11913,12105,12297,12489,12681,12873,13065,13257,13449,13641,13833,14025,14217,14409,14601,14793,14985,15177,15369,15561,15753,15945,16137,16329,16521,16713,16905,17097,17289,17481,17673,17865,18057,18249,18441,18633,18825,19017,19209,19401,19593,19785,19977,20169,20361,20553,20745,20937,21129,21321,21513,21705,21897,22089,22281,22473,22665,22857,23049,23241,23433,23625,23817,24009,24201,24393,24585,24777,24969,25161,25353,25545,25737,25929,26121,26313,26505,26697,26889,27081,27273,27465,27657,27849,28041,28233,28425,28617,28809,29001,29193,29385,29577,29769,29961,30153,30345,30537,30729,30921,31113,31305,31497,31689,31881,32073,32265,32457,32649,32841,33033,33225,33417,33609,33801,33993,34185,34377,34569,34761,34953,35145,35337,35529,35721,35913,36105,36297,36489,36681,200,392,584,776,968,1160,1352,1544,1736,1928,2120,2312,2504,2696,2888,3080,3272,3464,3656,3848,4040,4232,4424,4616,4808,5000,5192,5384,5576,5768,5960,6152,6344,6536,6728,6920,7112,7304,7496,7688,7880,8072,8264,8456,8648,8840,9032,9224,9416,9608,9800,9992,10184,10376,10568,10760,10952,11144,11336,11528,11720,11912,12104,12296,12488,12680,12872,13064,13256,13448,13640,13832,14024,14216,14408,14600,14792,14984,15176,15368,15560,15752,15944,16136,16328,16520,16712,16904,17096,17288,17480,17672,17864,18056,18248,18440,18632,18824,19016,19208,19400,19592,19784,19976,20168,20360,20552,20744,20936,21128,21320,21512,21704,21896,22088,22280,22472,22664,22856,23048,23240,23432,23624,23816,24008,24200,24392,24584,24776,24968,25160,25352,25544,25736,25928,26120,26312,26504,26696,26888,27080,27272,27464,27656,27848,28040,28232,28424,28616,28808,29000,29192,29384,29576,29768,29960,30152,30344,30536,30728,30920,31112,31304,31496,31688,31880,32072,32264,32456,32648,32840,33032,33224,33416,33608,33800,33992,34184,34376,34568,34760,34952,35144,35336,35528,35720,35912,36104,36296,36488,36680,36872')
MaskDetectorsInShape(Workspace='14251rear_1D_1.75_16.5',ShapeXML='<infinite-plane id="unique phi_plane1"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="-1.0" y="-1.22464679915e-16" z="0" /></infinite-plane><infinite-plane id="unique phi_plane2"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="-1.0" y="-2.44929359829e-16" z="0" /></infinite-plane><infinite-plane id="unique phi_plane3"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="1.0" y="2.44929359829e-16" z="0" /></infinite-plane><infinite-plane id="unique phi_plane4"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="1.0" y="1.22464679915e-16" z="0" /></infinite-plane><algebra val="#((unique phi_plane1 unique phi_plane2):(unique phi_plane3 unique phi_plane4))" />')
MaskDetectorsInShape(Workspace='14251rear_1D_1.75_16.5',ShapeXML='<cylinder id="arm"><centre-of-bottom-base x="0" y="0" z="23.3277280273" /><axis x="0.945518575599" y="0.325568154457" z="0.0" /><radius val="0.0065" /><height val="1000000.0" /></cylinder>')
# sample sans
ConvertUnits(InputWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='14251rear_1D_1.75_16.5',Target='Wavelength')
Rebin(InputWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='14251rear_1D_1.75_16.5',Params='1.75,-0.05,16.5')
# sample monitor
CropWorkspace(InputWorkspace='14251_sans_nxs',OutputWorkspace='Monitor',StartWorkspaceIndex='1',EndWorkspaceIndex='1')
ConvertUnits(InputWorkspace='Monitor',OutputWorkspace='Monitor',Target='Wavelength')
InterpolatingRebin(InputWorkspace='Monitor',OutputWorkspace='Monitor',Params='1.75,-0.05,16.5')
# sample tran
CropWorkspace(InputWorkspace='14251_trans_nxs',OutputWorkspace='14251_trans_nxs_tmp',StartWorkspaceIndex='1',EndWorkspaceIndex='3')
FlatBackground(InputWorkspace='14251_trans_nxs_tmp',OutputWorkspace='14251_trans_nxs_tmp',StartX='85000',EndX='98000',WorkspaceIndexList='0',Mode='Mean')
ConvertUnits(InputWorkspace='14251_trans_nxs_tmp',OutputWorkspace='14251_trans_nxs_tmp',Target='Wavelength')
InterpolatingRebin(InputWorkspace='14251_trans_nxs_tmp',OutputWorkspace='14251_trans_nxs_tmp',Params='1.75,-0.05,16.5')
# direct
CropWorkspace(InputWorkspace='14253_trans_nxs',OutputWorkspace='14253_trans_nxs_tmp',StartWorkspaceIndex='1',EndWorkspaceIndex='3')
FlatBackground(InputWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14253_trans_nxs_tmp',StartX='85000',EndX='98000',WorkspaceIndexList='0',Mode='Mean')
ConvertUnits(InputWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14253_trans_nxs_tmp',Target='Wavelength')
InterpolatingRebin(InputWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14253_trans_nxs_tmp',Params='1.75,-0.05,16.5')
# sample trans and direct => calculate Transmission
CalculateTransmission(SampleRunWorkspace='14251_trans_nxs_tmp',DirectRunWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14251_trans_sample_1.75_16.5',IncidentBeamMonitor='2',TransmissionMonitor='4',RebinParams='1.75,-0.05,16.5',OutputUnfittedData='1')
# sample sans
CreateSingleValuedWorkspace(OutputWorkspace='__tmp_binary_operation_double',DataValue='16.809999999999999')
Multiply(LHSWorkspace='14251rear_1D_1.75_16.5',RHSWorkspace='__tmp_binary_operation_double',OutputWorkspace='14251rear_1D_1.75_16.5')
CreateSingleValuedWorkspace(OutputWorkspace='__tmp_binary_operation_double',DataValue='100.53096491487338')
Divide(LHSWorkspace='14251rear_1D_1.75_16.5',RHSWorkspace='__tmp_binary_operation_double',OutputWorkspace='14251rear_1D_1.75_16.5')
# Load Direct file => Q conversion
LoadRKH(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/for_Mantid/DIRECT_14225_4m_GC_M3trans_rear_03Aug12.dat',OutputWorkspace='__CalculateNormISIS_loaded_tmp')
ConvertToHistogram(InputWorkspace='__CalculateNormISIS_loaded_tmp',OutputWorkspace='__CalculateNormISIS_loaded_tmp')
RebinToWorkspace(WorkspaceToRebin='__CalculateNormISIS_loaded_tmp',WorkspaceToMatch='14251rear_1D_1.75_16.5',OutputWorkspace='__CalculateNorm_loaded_temp')
RenameWorkspace(InputWorkspace='__CalculateNorm_loaded_temp',OutputWorkspace='__Q_WAVE_conversion_temp')
# Monitor data => Q conversion
RebinToWorkspace(WorkspaceToRebin='Monitor',WorkspaceToMatch='14251rear_1D_1.75_16.5',OutputWorkspace='__CalculateNorm_loaded_temp')
Multiply(LHSWorkspace='__CalculateNorm_loaded_temp',RHSWorkspace='__Q_WAVE_conversion_temp',OutputWorkspace='__Q_WAVE_conversion_temp')
# Sample trans => Q conversion
RebinToWorkspace(WorkspaceToRebin='14251_trans_sample_1.75_16.5',WorkspaceToMatch='14251rear_1D_1.75_16.5',OutputWorkspace='__CalculateNorm_loaded_temp')
Multiply(LHSWorkspace='__CalculateNorm_loaded_temp',RHSWorkspace='__Q_WAVE_conversion_temp',OutputWorkspace='__Q_WAVE_conversion_temp')
# Q1D
Q1D(DetBankWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='14251rear_1D_1.75_16.5',OutputBinning='0.0035,0.001,0.0125,-0.08,0.317,-0.12,3',WavelengthAdj='__Q_WAVE_conversion_temp',AccountForGravity='1')
RenameWorkspace(InputWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='14251rear_1D_1.75_16.5_sam_tmp')
# can sans Mask
CropWorkspace(InputWorkspace='14254_sans_nxs',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp',StartWorkspaceIndex='8',EndWorkspaceIndex='36871')
MaskBins(InputWorkspace='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp',XMin='13000',XMax='15250')
MaskDetectorsInShape(Workspace='14251rear_1D_1.75_16.5_can_tmp',ShapeXML='<infinite-cylinder id="beam_stop"><centre x="0" y="0" z="0.0" /><axis x="0" y="0" z="1" /><radius val="0.047" /></infinite-cylinder><algebra val="beam_stop"/>')
MaskDetectors(Workspace='14251rear_1D_1.75_16.5_can_tmp',SpectraList='9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,36489,36490,36491,36492,36493,36494,36495,36496,36497,36498,36499,36500,36501,36502,36503,36504,36505,36506,36507,36508,36509,36510,36511,36512,36513,36514,36515,36516,36517,36518,36519,36520,36521,36522,36523,36524,36525,36526,36527,36528,36529,36530,36531,36532,36533,36534,36535,36536,36537,36538,36539,36540,36541,36542,36543,36544,36545,36546,36547,36548,36549,36550,36551,36552,36553,36554,36555,36556,36557,36558,36559,36560,36561,36562,36563,36564,36565,36566,36567,36568,36569,36570,36571,36572,36573,36574,36575,36576,36577,36578,36579,36580,36581,36582,36583,36584,36585,36586,36587,36588,36589,36590,36591,36592,36593,36594,36595,36596,36597,36598,36599,36600,36601,36602,36603,36604,36605,36606,36607,36608,36609,36610,36611,36612,36613,36614,36615,36616,36617,36618,36619,36620,36621,36622,36623,36624,36625,36626,36627,36628,36629,36630,36631,36632,36633,36634,36635,36636,36637,36638,36639,36640,36641,36642,36643,36644,36645,36646,36647,36648,36649,36650,36651,36652,36653,36654,36655,36656,36657,36658,36659,36660,36661,36662,36663,36664,36665,36666,36667,36668,36669,36670,36671,36672,36673,36674,36675,36676,36677,36678,36679,36680,36681,36682,36683,36684,36685,36686,36687,36688,36689,36690,36691,36692,36693,36694,36695,36696,36697,36698,36699,36700,36701,36702,36703,36704,36705,36706,36707,36708,36709,36710,36711,36712,36713,36714,36715,36716,36717,36718,36719,36720,36721,36722,36723,36724,36725,36726,36727,36728,36729,36730,36731,36732,36733,36734,36735,36736,36737,36738,36739,36740,36741,36742,36743,36744,36745,36746,36747,36748,36749,36750,36751,36752,36753,36754,36755,36756,36757,36758,36759,36760,36761,36762,36763,36764,36765,36766,36767,36768,36769,36770,36771,36772,36773,36774,36775,36776,36777,36778,36779,36780,36781,36782,36783,36784,36785,36786,36787,36788,36789,36790,36791,36792,36793,36794,36795,36796,36797,36798,36799,36800,36801,36802,36803,36804,36805,36806,36807,36808,36809,36810,36811,36812,36813,36814,36815,36816,36817,36818,36819,36820,36821,36822,36823,36824,36825,36826,36827,36828,36829,36830,36831,36832,36833,36834,36835,36836,36837,36838,36839,36840,36841,36842,36843,36844,36845,36846,36847,36848,36849,36850,36851,36852,36853,36854,36855,36856,36857,36858,36859,36860,36861,36862,36863,36864,36865,36866,36867,36868,36869,36870,36871,36872,9,201,393,585,777,969,1161,1353,1545,1737,1929,2121,2313,2505,2697,2889,3081,3273,3465,3657,3849,4041,4233,4425,4617,4809,5001,5193,5385,5577,5769,5961,6153,6345,6537,6729,6921,7113,7305,7497,7689,7881,8073,8265,8457,8649,8841,9033,9225,9417,9609,9801,9993,10185,10377,10569,10761,10953,11145,11337,11529,11721,11913,12105,12297,12489,12681,12873,13065,13257,13449,13641,13833,14025,14217,14409,14601,14793,14985,15177,15369,15561,15753,15945,16137,16329,16521,16713,16905,17097,17289,17481,17673,17865,18057,18249,18441,18633,18825,19017,19209,19401,19593,19785,19977,20169,20361,20553,20745,20937,21129,21321,21513,21705,21897,22089,22281,22473,22665,22857,23049,23241,23433,23625,23817,24009,24201,24393,24585,24777,24969,25161,25353,25545,25737,25929,26121,26313,26505,26697,26889,27081,27273,27465,27657,27849,28041,28233,28425,28617,28809,29001,29193,29385,29577,29769,29961,30153,30345,30537,30729,30921,31113,31305,31497,31689,31881,32073,32265,32457,32649,32841,33033,33225,33417,33609,33801,33993,34185,34377,34569,34761,34953,35145,35337,35529,35721,35913,36105,36297,36489,36681,200,392,584,776,968,1160,1352,1544,1736,1928,2120,2312,2504,2696,2888,3080,3272,3464,3656,3848,4040,4232,4424,4616,4808,5000,5192,5384,5576,5768,5960,6152,6344,6536,6728,6920,7112,7304,7496,7688,7880,8072,8264,8456,8648,8840,9032,9224,9416,9608,9800,9992,10184,10376,10568,10760,10952,11144,11336,11528,11720,11912,12104,12296,12488,12680,12872,13064,13256,13448,13640,13832,14024,14216,14408,14600,14792,14984,15176,15368,15560,15752,15944,16136,16328,16520,16712,16904,17096,17288,17480,17672,17864,18056,18248,18440,18632,18824,19016,19208,19400,19592,19784,19976,20168,20360,20552,20744,20936,21128,21320,21512,21704,21896,22088,22280,22472,22664,22856,23048,23240,23432,23624,23816,24008,24200,24392,24584,24776,24968,25160,25352,25544,25736,25928,26120,26312,26504,26696,26888,27080,27272,27464,27656,27848,28040,28232,28424,28616,28808,29000,29192,29384,29576,29768,29960,30152,30344,30536,30728,30920,31112,31304,31496,31688,31880,32072,32264,32456,32648,32840,33032,33224,33416,33608,33800,33992,34184,34376,34568,34760,34952,35144,35336,35528,35720,35912,36104,36296,36488,36680,36872')
MaskDetectorsInShape(Workspace='14251rear_1D_1.75_16.5_can_tmp',ShapeXML='<infinite-plane id="unique phi_plane1"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="-1.0" y="-1.22464679915e-16" z="0" /></infinite-plane><infinite-plane id="unique phi_plane2"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="-1.0" y="-2.44929359829e-16" z="0" /></infinite-plane><infinite-plane id="unique phi_plane3"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="1.0" y="2.44929359829e-16" z="0" /></infinite-plane><infinite-plane id="unique phi_plane4"><point-in-plane x="0" y="0" z="0" /><normal-to-plane x="1.0" y="1.22464679915e-16" z="0" /></infinite-plane><algebra val="#((unique phi_plane1 unique phi_plane2):(unique phi_plane3 unique phi_plane4))" />')
MaskDetectorsInShape(Workspace='14251rear_1D_1.75_16.5_can_tmp',ShapeXML='<cylinder id="arm"><centre-of-bottom-base x="0" y="0" z="23.3277280273" /><axis x="0.945518575599" y="0.325568154457" z="0.0" /><radius val="0.0065" /><height val="1000000.0" /></cylinder>')
ConvertUnits(InputWorkspace='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp',Target='Wavelength')
Rebin(InputWorkspace='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp',Params='1.75,-0.05,16.5')
# Can Monitor
CropWorkspace(InputWorkspace='14254_sans_nxs',OutputWorkspace='Monitor',StartWorkspaceIndex='1',EndWorkspaceIndex='1')
ConvertUnits(InputWorkspace='Monitor',OutputWorkspace='Monitor',Target='Wavelength')
InterpolatingRebin(InputWorkspace='Monitor',OutputWorkspace='Monitor',Params='1.75,-0.05,16.5')
# Can Sans
CropWorkspace(InputWorkspace='14254_trans_nxs',OutputWorkspace='14254_trans_nxs_tmp',StartWorkspaceIndex='1',EndWorkspaceIndex='3')
FlatBackground(InputWorkspace='14254_trans_nxs_tmp',OutputWorkspace='14254_trans_nxs_tmp',StartX='85000',EndX='98000',WorkspaceIndexList='0',Mode='Mean')
ConvertUnits(InputWorkspace='14254_trans_nxs_tmp',OutputWorkspace='14254_trans_nxs_tmp',Target='Wavelength')
InterpolatingRebin(InputWorkspace='14254_trans_nxs_tmp',OutputWorkspace='14254_trans_nxs_tmp',Params='1.75,-0.05,16.5')
# direct beam
CropWorkspace(InputWorkspace='14253_trans_nxs',OutputWorkspace='14253_trans_nxs_tmp',StartWorkspaceIndex='1',EndWorkspaceIndex='3')
FlatBackground(InputWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14253_trans_nxs_tmp',StartX='85000',EndX='98000',WorkspaceIndexList='0',Mode='Mean')
ConvertUnits(InputWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14253_trans_nxs_tmp',Target='Wavelength')
InterpolatingRebin(InputWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14253_trans_nxs_tmp',Params='1.75,-0.05,16.5')
# can transmission
CalculateTransmission(SampleRunWorkspace='14254_trans_nxs_tmp',DirectRunWorkspace='14253_trans_nxs_tmp',OutputWorkspace='14254_trans_can_1.75_16.5',IncidentBeamMonitor='2',TransmissionMonitor='4',RebinParams='1.75,-0.05,16.5',OutputUnfittedData='1')
CreateSingleValuedWorkspace(OutputWorkspace='__tmp_binary_operation_double',DataValue='16.809999999999999')
Multiply(LHSWorkspace='14251rear_1D_1.75_16.5_can_tmp',RHSWorkspace='__tmp_binary_operation_double',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp')
CreateSingleValuedWorkspace(OutputWorkspace='__tmp_binary_operation_double',DataValue='100.53096491487338')
Divide(LHSWorkspace='14251rear_1D_1.75_16.5_can_tmp',RHSWorkspace='__tmp_binary_operation_double',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp')
# Load DIRECT 
LoadRKH(Filename=r'/home/tianhl/workarea/mantid/SANS2d_data/for_Mantid/DIRECT_14225_4m_GC_M3trans_rear_03Aug12.dat',OutputWorkspace='__CalculateNormISIS_loaded_tmp')
ConvertToHistogram(InputWorkspace='__CalculateNormISIS_loaded_tmp',OutputWorkspace='__CalculateNormISIS_loaded_tmp')
RebinToWorkspace(WorkspaceToRebin='__CalculateNormISIS_loaded_tmp',WorkspaceToMatch='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='__CalculateNorm_loaded_temp')
# can transmission to Q conversion
RenameWorkspace(InputWorkspace='__CalculateNorm_loaded_temp',OutputWorkspace='__Q_WAVE_conversion_temp')
# Monitor to Q conversion
RebinToWorkspace(WorkspaceToRebin='Monitor',WorkspaceToMatch='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='__CalculateNorm_loaded_temp')
Multiply(LHSWorkspace='__CalculateNorm_loaded_temp',RHSWorkspace='__Q_WAVE_conversion_temp',OutputWorkspace='__Q_WAVE_conversion_temp')
# Can trans to Q Conversion
RebinToWorkspace(WorkspaceToRebin='14254_trans_can_1.75_16.5',WorkspaceToMatch='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='__CalculateNorm_loaded_temp')
Multiply(LHSWorkspace='__CalculateNorm_loaded_temp',RHSWorkspace='__Q_WAVE_conversion_temp',OutputWorkspace='__Q_WAVE_conversion_temp')
# Can Q1D
Q1D(DetBankWorkspace='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='14251rear_1D_1.75_16.5_can_tmp',OutputBinning='0.0035,0.001,0.0125,-0.08,0.317,-0.12,3',WavelengthAdj='__Q_WAVE_conversion_temp',AccountForGravity='1')
# Sample Q1D - can Q1D
Minus(LHSWorkspace='14251rear_1D_1.75_16.5_sam_tmp',RHSWorkspace='14251rear_1D_1.75_16.5_can_tmp',OutputWorkspace='14251rear_1D_1.75_16.5')
CropWorkspace(InputWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='14251rear_1D_1.75_16.5',XMin='0.0035000000000000001',XMax='0.87994503207800001')
AddSampleLog(Workspace='14251rear_1D_1.75_16.5',LogName='UserFile',LogText='/home/tianhl/workarea/mantid/SANS2d_data/for_Mantid/MASKSANS2D_122M_4m_RKH_2dets_8mm_new.txt')
RenameWorkspace(InputWorkspace='14251rear_1D_1.75_16.5',OutputWorkspace='1p0M_NaBr_DTAB')
